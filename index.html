<!DOCTYPE html>
<html>
<head>
    <title>Ленты</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">

    <script src="js/side/angular.min.js"></script>
    <script type="application/javascript" src="js/side/angular-ui-router.js"></script>
    <script type="application/javascript" src="js/side/FireUser.js"></script>
    <script type="application/javascript" src="js/side/marked.js"></script>
    <script type="application/javascript" src="js/side/angular-marked.js"></script>
    <script type="application/javascript" src="js/side/prefixfree.min.js"></script>
    <script type="application/javascript" src="js/side/ngStorage.js"></script>
    <script type="application/javascript" src="js/feeds-app.js"></script>
    <script type="application/javascript" src="js/directives/feed.js"></script>
    <script type="application/javascript" src="js/directives/directives.js"></script>
    <script type="application/javascript" src="js/services/types.js"></script>
    <script type="application/javascript" src="js/side/firebase.js"></script>
    <script type="application/javascript" src="js/side/angularfire.min.js"></script>
    <script type="application/javascript" src="js/side/firebase-simple-login.js"></script>
    <script type="application/javascript" src="js/side/bind-polyfill.js"></script>
    <script type="application/javascript" src="js/side/angular-smooth-scroll.js"></script>
    <script type="application/javascript" src="js/side/loading-bar.js"></script>
    <script type="application/javascript" src="js/side/ng-videosharing-embed.min.js"></script>
    <script type="application/javascript" src="js/side/moment-with-locales.js"></script>
    <script type="application/javascript" src="js/side/angular-moment.js"></script>

    <link href="css/story.css" rel="stylesheet">
    <link href="css/gridforms.css" rel="stylesheet">
    <link href="css/loading-bar.css" rel="stylesheet">

</head>
<body data-ng-app="fruitStory" data-ng-controller="feeds" data-ng-cloak>

<section id="header">



    <img class="logo" src="icons/feeds-logo.svg">

    <button
            class="header-button"
            ng-class="{active:feedTitle==feeds.personal.title}"
            ng-click="changeFeed('personal')">Личные ({{feeds.personal.feed.length}})</button>


    <button ng-disabled="!loaded"
            class="header-button"
            ng-class="{active:mtd.firebase}"
            ng-click="mtd.switchToPublic()">
        <span ng-if="loaded && online">Публичные</span>
        <span ng-if="!online && !loaded">Подключение...</span>
        <span ng-if="online && !loaded">Загрузка...</span>
        <span ng-if="loaded && !online">Публичные (оффлайн)</span>
    </button>

    <button ng-if="!mtd.logging && !mtd.creating && !data.userLoggedIn"
            class="header-button"
            ng-click="mtd.logging=1">Войти {{logging}}</button>
    <button ng-if="!mtd.logging && !mtd.creating && !data.userLoggedIn"
            class="header-button"
            ng-click="mtd.creating=1">Представиться</button>



    <div class="auth auth-name"
         ng-if="data.userLoggedIn">
        {{mtd.users[data.userInfo.md5_hash].name}}
         </div>

    <div fuLoginForm
         mtd="mtd"
         class="auth"
         data-ng-if="!data.userLoggedIn && mtd.logging"></div>


    <div fuLogOut
         class="header-button"
         data-ng-if="data.userLoggedIn"></div>

    <div fuSignUpForm
         mtd="mtd"
         class="auth"
         data-ng-if="!data.userLoggedIn && mtd.creating"></div>



</section>
<section id="feed"
        feed
        data-persona="persona"
        data-mtd="mtd"
        data-feed-source="feed"
        data-feed-rating="rating"
        data-feed-rating-mode="ratingMode"
        >

</section>

</body>
</html>